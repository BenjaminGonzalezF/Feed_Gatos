(()=>{function e(){const e=new XMLHttpRequest;e.open("GET",`https://api.thecatapi.com/v1/images/search?limit=3&api_key=${apiKey}`,!0),e.onload=function(){if(200==e.status){const t=e.responseText;console.log(t);const n=JSON.parse(t);for(const e of n){const t=document.createElement("img");t.src=e.url,t.width=600,t.height=700;const n=document.createElement("button");n.id="me-gusta",n.textContent="Me gusta",n.addEventListener("click",(function(e){e.target.classList.toggle("liked"),console.log("Se ha dado me gusta a la foto");const t=e.target.parentNode.firstChild.src;fetch("http://localhost:3000/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})})}));const o=document.createElement("div");o.className="publicacion",o.appendChild(t),o.appendChild(n),document.getElementById("feed").appendChild(o)}}},e.send()}apiKey="live_hVU8F4bVnxQkW2scERfYXVckgIB34Z6E7Qx7JyZbcxAVt1nqrqkNz2nNXQ05Zq2v",window.addEventListener("scroll",(function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&e()})),document.getElementById("ver-guardados").addEventListener("click",(function(){window.location.href="guardados.html"})),e()})();